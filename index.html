<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>

    </style>
</head>
<body>
    <section>
        <button class="add" onclick="addRow();">추가하기</button>
        <ul>
            <li>1번 아이템</li>
        </ul>
    </section>
    <script>
        // DOM 감지 시작

        //타겟 정해주고
        const target = document.querySelector('ul');

        //옵저버 생성
        const observer = new MutationObserver((obs)=>{
            alert('감지!!!');
        });
        //옵저버 옵션
        let options = {
            attributes: true,
            childList: true,
            characterData: true
        }
        //옵저버 파견
        observer.observe(target,options);

        //버튼 클릭 시 ul에 li추가
       function addRow(){
            const list = document.querySelector('ul');
            const liLast = document.querySelector('ul li:last-child');
            //마지막 li의 텍스트의 숫자만 가져와서 + 1
            const newNum = parseInt(liLast.textContent.replace(/[^0-9]/g, ''))+1;
            console.log(newNum);
            //DOM에 li생성
            const row = document.createElement('li');
            //생성한 li내용을 방금 newNum이란 이름으로 만든 넘버 가져와서 넣기
            row.textContent = newNum+"번 아이템";
            //DOM에 생성했던 li ul에다가 넣기
            list.appendChild(row);
       }
    </script>
</body>
</html>